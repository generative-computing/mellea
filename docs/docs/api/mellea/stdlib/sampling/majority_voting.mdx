---
title: "mellea.stdlib.sampling.majority_voting"
sidebarTitle: "mellea.stdlib.sampling.majority_voting"
description: "Sampling Strategies for Minimum Bayes Risk Decoding (MBRD)."
---





import { SidebarFix } from "/snippets/SidebarFix.mdx";

<SidebarFix />

## Classes

<div className="w-full h-px bg-gray-200 dark:bg-gray-700 my-4" />


### <span className="ml-2 inline-flex items-center rounded-full px-2 py-1 text-[0.7rem] font-bold tracking-wide bg-[#4ADE8033]/20 text-[#15803D]">CLASS</span> `BaseMBRDSampling` <sup><a href="https://github.com/generative-computing/mellea/blob/main/mellea/stdlib/sampling/majority_voting.py#L22" target="_blank"><Icon icon="github" style="width: 14px; height: 14px;" /></a></sup>


Abstract Minimum Bayes Risk Decoding (MBRD) Sampling Strategy.



<div className="h-8" />
**Methods:**

<div className="w-full h-px bg-gray-200 dark:bg-gray-700 my-4" />

#### <span className="ml-2 inline-flex items-center rounded-full px-2 py-1 text-[0.7rem] font-bold tracking-wide bg-[#3064E3]/20 text-[#1D4ED8]">FUNC</span> `compare_strings` <sup><a href="https://github.com/generative-computing/mellea/blob/main/mellea/stdlib/sampling/majority_voting.py#L59" target="_blank"><Icon icon="github" style="width: 14px; height: 14px;" /></a></sup>

```python
compare_strings(self, ref: str, pred: str) -> float
```

This method is the abstract method for MBRD similarity metric.


<div className="w-full h-px bg-gray-200 dark:bg-gray-700 my-4" />

#### <span className="ml-2 inline-flex items-center rounded-full px-2 py-1 text-[0.7rem] font-bold tracking-wide bg-[#3064E3]/20 text-[#1D4ED8]">FUNC</span> `maybe_apply_weighted` <sup><a href="https://github.com/generative-computing/mellea/blob/main/mellea/stdlib/sampling/majority_voting.py#L62" target="_blank"><Icon icon="github" style="width: 14px; height: 14px;" /></a></sup>

```python
maybe_apply_weighted(self, scr: np.ndarray)
```

Applies weights if self.weighted is True. Not Implemented.


<div className="w-full h-px bg-gray-200 dark:bg-gray-700 my-4" />

#### <span className="ml-2 inline-flex items-center rounded-full px-2 py-1 text-[0.7rem] font-bold tracking-wide bg-[#3064E3]/20 text-[#1D4ED8]">FUNC</span> `sample` <sup><a href="https://github.com/generative-computing/mellea/blob/main/mellea/stdlib/sampling/majority_voting.py#L71" target="_blank"><Icon icon="github" style="width: 14px; height: 14px;" /></a></sup>

```python
sample(self, action: Component[S], context: Context, backend: Backend, requirements: list[Requirement] | None) -> SamplingResult[S]
```

Samples using majority voting.

**Args:**
- `action `: The action object to be sampled.
- `context`: The context to be passed to the sampling strategy.
- `backend`: The backend used for generating samples.
- `requirements`: List of requirements to test against (merged with global requirements).
- `validation_ctx`: Optional context to use for validation. If None, validation_ctx = ctx.
- `format`: output format for structured outputs; ignored for this sampling strategy.
- `model_options`: model options to pass to the backend during generation / validation.
- `tool_calls`: True if tool calls should be used during this sampling strategy.
- `show_progress`: if true, a tqdm progress bar is used. Otherwise, messages will still be sent to flog.

**Returns:**
- A result object indicating the success or failure of the sampling process.


<div className="w-full h-px bg-gray-200 dark:bg-gray-700 my-4" />

### <span className="ml-2 inline-flex items-center rounded-full px-2 py-1 text-[0.7rem] font-bold tracking-wide bg-[#4ADE8033]/20 text-[#15803D]">CLASS</span> `MajorityVotingStrategyForMath` <sup><a href="https://github.com/generative-computing/mellea/blob/main/mellea/stdlib/sampling/majority_voting.py#L164" target="_blank"><Icon icon="github" style="width: 14px; height: 14px;" /></a></sup>


MajorityVoting Sampling Strategy for Math Expressions.



<div className="h-8" />
**Methods:**

<div className="w-full h-px bg-gray-200 dark:bg-gray-700 my-4" />

#### <span className="ml-2 inline-flex items-center rounded-full px-2 py-1 text-[0.7rem] font-bold tracking-wide bg-[#3064E3]/20 text-[#1D4ED8]">FUNC</span> `compare_strings` <sup><a href="https://github.com/generative-computing/mellea/blob/main/mellea/stdlib/sampling/majority_voting.py#L225" target="_blank"><Icon icon="github" style="width: 14px; height: 14px;" /></a></sup>

```python
compare_strings(self, ref: str, pred: str) -> float
```

Helper function to compare strings using the math extraction metrics.


<div className="w-full h-px bg-gray-200 dark:bg-gray-700 my-4" />

### <span className="ml-2 inline-flex items-center rounded-full px-2 py-1 text-[0.7rem] font-bold tracking-wide bg-[#4ADE8033]/20 text-[#15803D]">CLASS</span> `MBRDRougeLStrategy` <sup><a href="https://github.com/generative-computing/mellea/blob/main/mellea/stdlib/sampling/majority_voting.py#L250" target="_blank"><Icon icon="github" style="width: 14px; height: 14px;" /></a></sup>


Sampling Strategy that uses RougeL to compute symbol-level distances for majority voting.



<div className="h-8" />
**Methods:**

<div className="w-full h-px bg-gray-200 dark:bg-gray-700 my-4" />

#### <span className="ml-2 inline-flex items-center rounded-full px-2 py-1 text-[0.7rem] font-bold tracking-wide bg-[#3064E3]/20 text-[#1D4ED8]">FUNC</span> `compare_strings` <sup><a href="https://github.com/generative-computing/mellea/blob/main/mellea/stdlib/sampling/majority_voting.py#L289" target="_blank"><Icon icon="github" style="width: 14px; height: 14px;" /></a></sup>

```python
compare_strings(self, ref: str, pred: str) -> float
```

Helper function to compare strings using the math extraction metrics.

<div className="w-full h-px bg-gray-200 dark:bg-gray-700 my-4" />
