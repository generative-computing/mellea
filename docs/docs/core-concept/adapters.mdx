---
title: "Tool calling"
description: " Command-line tool for adapting base models like IBM Granite to custom tasks."
---

Mellea supports tool calling for providers/models that support it. Most session level functions support setting a tool_calls boolean. Setting this to true allows tools to be called, but there's no guarantee that a model will call them.
Tools can be made available for the model to call in a few ways:

1. Components: components can have a TemplateRepresentation object that contains tools.
2. Context: depending on the context, the components in that context can be used as sources of additional tools in the exact same way they would if they were the current action.
3. `ModelOptions.TOOLS`: model options can include a tools parameter. The preferred way of passing these tools is as a list of function objects.

Currently, tools are identified by the name of the function. If there are conflicts, the most recent tool with that name will be preferred. This means the tools available to the model will have the same priority listed above:

1. Tools from the current component will always be included
2. Tools from the context will be included if there are no name conflicts. A given context can decide what tools to surface, but in most cases, tools from the most recent component in the context will take priority over tools from older requests.
3. Tools from `ModelOptions.TOOLS` will only be added if they do not conflict with any of the above functions.

For examples on adding tools to the template representation of a component, see the `Table` object in [richdocument.py](../mellea/stdlib/docs/richdocument.py).

Here's an example of adding a tool through model options. This can be useful when you want to add a tool like web search that should almost always be available:

```python
from mellea.backends.types import ModelOption

def web_search(query: str) -> str:
    ...

output = m.instruct(
    "Who is the 1st President of the United States?",
    model_options={
        ModelOptions.TOOLS: [web_search],
    },
    tool_calls = True,
)

assert "web_search" in output.tool_calls

result = output.tool_calls["web_search"].call_func()
```
